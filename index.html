<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Type Multiplier Calculator And Weakness Calculator</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #0e1012;
            color: white;
            margin: 0;
            padding: 20px;
            text-align: start;
        }

        h2,
        h3 {
            color: #fff;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        select {
            padding: 10px;
            font-size: 16px;
            color: #0e1012;
            border: none;
            border-radius: 5px;
            margin-bottom: 5px;
            inline-size: 100%;
            box-sizing: border-box;
            -webkit-appearance: none;
            appearance: none;
            background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEd0lEQVR4nO2dzWpUQRSE7yQYXLsQfQwhW0H0bkR8HIm4EX0H9/pKogTU19Bd1L7aPUwymbk/p+/pqu46cBaS7u8UXY0MNR3S9f2Ts9B3QndLatgX95/ttHgsPGrx4tl51OLFW43nOkw8LJ7rMPGweK7DxMPiuQ4TD4vnOkw8LJ7rMPGweK7DxMPjuQ4TD49HLV48O49avHh2HrV48ew8avHi2XnU4sXLwKMWL56dRy1ePDuPWrx4dh61ePHsPGrx4tl51OLFs/OoxYu3Gs91mHhYPNdh4mHxXIeJh8VzHSYeFs91mHhYPNdh4mHxXIeJh8dzHSYeHo9avHh2HrV48ew8avHi2XnU4sWz86jFi5eBRy1ePDuPWrx4dh61ePHsPGrx4tl5t/zwYegPoX+E/hX6z1hvNpu9nrJPPBfez9Dfo6cPbrsAu+afhL4EEi9eXt7X0JubF2D3n/eBxYuXh3evG6lvwOLFs/Eux8wf6mXo34DixbPxBk9fTLkAQ70GEy+enXcx1fxUF0DixbPx3s5yfqe2l6Ciw2iNt9j8VBcVHUZrPJv5KVE6PT19U8FhtMYbNf9o0ngzTkyXgPQwWuNNMr+f+yawu+WDIcFhtMabbP7g62Tzd/67mH0JKjpcdN4s8/cuwIxvkSZfgooOF5032/xrF2DBV5Kjl6Ciw0XnLTJ/+xnA8H30wUtQ0eGi8xab32d6E6jEkNX8uCDHSxQlhozmx0VZniF1Sgz5zI8Ls71BU2JIZn5cnPUBohJDIvPjhjV+3UiJIYP5adOSmjBMiSG6+UtrxjAlhg2bn0qJYcPmp1Ji2LD5qZQYNmx+KiWGDZufSolhq+YnnhJDDPNH84E1zE8sJYblze/nvgnMZX7idUoMi5rfL3wTuHjYAV7LiWFR8/cuQAHzU7WYGBY3/9oFKGh+qpYSQwjzt58BAMxP1UJiCGN+n+lNYG7xNSeGWObHBUjmp6oxMcQzPy5CMz9VTYkhpvlxIZz5iVdJYohrflwMaX5ikSeG2ObHDbDmJ17HmRjim582uQ2z8ZgSQw7zl1ZB8QyJocxfmYecGMp8Jx5iYijznXlIiaHML8RDSAxlfkleVzYxlPkIvEKJIb35R/cxiN/lOSeGVZjf95X97eDOJzGsxvyBQy3+AG/NxLAq8/cuAJv4I7w1EsPqzL92ARjFj/ByJoZVmt/3eG8Cc/NyJIbVmv+PRy1+WlkSw7rNjwt4xU+vJYlh/ebHRbzi59WrYPbVBPOvhrXe+orxqMXP5IV6fnKy+XLE/M+hn5XSV4RHLX4B7/z80d1wEZ6GH70P/Sn0x9DvQj/u/v/p3KL63HnU4sWz86jFi7caz3WYeFg812HiYfFch4mHxXMdJh4Wz3WYeFg812HiYfFch4mHx3MdJh4ej1q8eHYetXjx7Dxq8eLZedTixbPzqMWLl4FHLV48O49avHh2HrV48ew8avHi2XnU4sWz86jFi2fnUYsXbzWe6zDxsHiuw8TD4rkOEw+L5zpMPCye6zDxcHh/Adi5C8fDFWQNAAAAAElFTkSuQmCC") 95% 50% !important;
            background-repeat: no-repeat !important;
            background-color: #fff !important;
            background-size: 20px !important;
        }

        select {}

        button {
            padding: 10px;
            font-size: 16px;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            inline-size: 600px;
            /* Set the inline size */
            max-inline-size: 100%;
            /* Set the max inline size */
        }

        button:hover {
            background-color: #45a049;
        }

        h3 {
            margin-top: 20px;
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            margin-bottom: 5px;
        }

        .flex-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
            max-inline-size: 600px;
            /* Set the max inline size */
        }

        p {
            color: #ccc;
        }
    </style>
</head>

<body>
    <img src="./pokedex.png" alt="pokedex 100" height="50px">

    <h2>Pokemon Type Multiplier Calculator And Weakness Calculator</h2>

    <div class="flex-container">
        <div style="flex: 1; margin-right: 10px;">
            <label for="type1">Select Type 1:</label>
            <select id="type1" onchange="updateQueryString()">
                <!-- List all Pokemon types -->
                <option value="normal">Normal</option>
                <option value="fire">Fire</option>
                <option value="water">Water</option>
                <option value="electric">Electric</option>
                <option value="grass">Grass</option>
                <option value="ice">Ice</option>
                <option value="fighting">Fighting</option>
                <option value="poison">Poison</option>
                <option value="ground">Ground</option>
                <option value="flying">Flying</option>
                <option value="psychic">Psychic</option>
                <option value="bug">Bug</option>
                <option value="rock">Rock</option>
                <option value="ghost">Ghost</option>
                <option value="dragon">Dragon</option>
                <option value="dark">Dark</option>
                <option value="steel">Steel</option>
                <option value="fairy">Fairy</option>
            </select>
        </div>

        <div style="flex: 1;">
            <label for="type2">Select Type 2:</label>
            <select id="type2" onchange="updateQueryString()">
                <!-- List all Pokemon types, add "none" as an option -->
                <option value="none">None</option>
                <option value="normal">Normal</option>
                <option value="fire">Fire</option>
                <option value="water">Water</option>
                <option value="electric">Electric</option>
                <option value="grass">Grass</option>
                <option value="ice">Ice</option>
                <option value="fighting">Fighting</option>
                <option value="poison">Poison</option>
                <option value="ground">Ground</option>
                <option value="flying">Flying</option>
                <option value="psychic">Psychic</option>
                <option value="bug">Bug</option>
                <option value="rock">Rock</option>
                <option value="ghost">Ghost</option>
                <option value="dragon">Dragon</option>
                <option value="dark">Dark</option>
                <option value="steel">Steel</option>
                <option value="fairy">Fairy</option>
            </select>
        </div>
    </div>

    <button onclick="calculateMultipliers()" tabindex="0">Calculate Multipliers</button>
    <p>Press space or enter to click the button.</p>

    <h3>Type Multipliers:</h3>
    <ul id="multiplierList"></ul>

    <script>
        const typeChart = {
            bug: { fighting: 0.5, grass: 0.5, ground: 0.5, fire: 2, flying: 2, rock: 2 },
            dark: { dark: 0.5, ghost: 0.5, psychic: 0.5, bug: 2, fairy: 2, fighting: 2 },
            dragon: { electric: 0.5, fire: 0.5, grass: 0.5, water: 0.5, dragon: 2, fairy: 2, ice: 2 },
            electric: { electric: 0.5, flying: 0.5, steel: 0.5, ground: 2 },
            fairy: { bug: 0.5, dark: 0.5, dragon: 0.5, fighting: 0.5, poison: 2, steel: 2 },
            fighting: { bug: 0.5, dark: 0.5, rock: 0.5, fairy: 2, flying: 2, psychic: 2 },
            fire: { bug: 0.5, fire: 0.5, grass: 0.5, ice: 0.5, steel: 0.5, ground: 2, rock: 2, water: 2 },
            flying: { bug: 0.5, fighting: 0.5, grass: 0.5, ground: 0.5, electric: 2, ice: 2, rock: 2 },
            ghost: { bug: 0.5, fighting: 0.5, normal: 0.5, poison: 0.5, dark: 2, ghost: 2 },
            grass: { electric: 0.5, grass: 0.5, ground: 0.5, water: 0.5, bug: 2, fire: 2, flying: 2, ice: 2, poison: 2 },
            ground: { electric: 0.5, poison: 0.5, rock: 0.5, grass: 2, ice: 2, water: 2 },
            ice: { ice: 0.5, fighting: 2, fire: 2, rock: 2, steel: 2 },
            normal: { ghost: 0.5, fighting: 2 },
            poison: { fairy: 0.5, fighting: 0.5, grass: 0.5, poison: 0.5, ground: 2, psychic: 2 },
            psychic: { fighting: 0.5, psychic: 0.5, bug: 2, dark: 2, ghost: 2 },
            rock: { fire: 0.5, flying: 0.5, normal: 0.5, poison: 0.5, fighting: 2, grass: 2, ground: 2, steel: 2, water: 2 },
            steel: { bug: 0.5, dragon: 0.5, fairy: 0.5, flying: 0.5, grass: 0.5, ice: 0.5, poison: 0.5, psychic: 0.5, rock: 0.5, steel: 0.5, fighting: 2, fire: 2, ground: 2 },
            water: { fire: 0.5, ice: 0.5, steel: 0.5, water: 0.5, electric: 2, grass: 2 },
        };

        function calculateMultipliers() {
            const urlParams = new URLSearchParams(window.location.search);
            const type1FromQuery = urlParams.get('type1');
            const type2FromQuery = urlParams.get('type2');
            const type1Dropdown = document.getElementById('type1');
            const type2Dropdown = document.getElementById('type2');
            const type1 = type1FromQuery || type1Dropdown.value.toLowerCase();
            const type2 = type2FromQuery || type2Dropdown.value.toLowerCase();

            // Set selected values in dropdowns
            type1Dropdown.value = type1;
            type2Dropdown.value = type2;

            // Update query string
            updateQueryString();

            const multipliers = calculateCombinedMultipliers(type1, type2);

            const multiplierList = document.getElementById('multiplierList');

            multiplierList.innerHTML = '';

            // Sort multipliers in decreasing order of effectiveness
            const sortedMultipliers = Object.entries(multipliers)
                .sort(([, a], [, b]) => b - a)
                .reduce((acc, [key, value]) => ({ ...acc, [key]: value }), {});

            for (const type in sortedMultipliers) {
                const multiplier = sortedMultipliers[type];
                const listItem = document.createElement('li');
                listItem.textContent = `${type.charAt(0).toUpperCase() + type.slice(1)}: ${multiplier}x`;
                multiplierList.appendChild(listItem);
            }
        }

        function calculateCombinedMultipliers(type1, type2) {
            const multipliers = {};

            for (const key of [type1, type2]) {
                if (key === 'none') {
                    continue;
                }

                const typeMultipliers = typeChart[key] || {};
                for (const otherType in typeMultipliers) {
                    const multiplier = typeMultipliers[otherType];
                    if (multipliers[otherType]) {
                        multipliers[otherType] *= multiplier;
                    } else {
                        multipliers[otherType] = multiplier;
                    }
                }
            }

            return multipliers;
        }

        function updateQueryString() {
            const type1 = document.getElementById('type1').value;
            const type2 = document.getElementById('type2').value;
            const urlParams = new URLSearchParams(window.location.search);

            urlParams.set('type1', type1);
            urlParams.set('type2', type2);

            window.history.replaceState({}, '', `${window.location.pathname}?${urlParams}`);
        }

        // Calculate multipliers on page load if types are provided in the query string
        document.addEventListener('DOMContentLoaded', () => {
            calculateMultipliers();
        });

        // Trigger button click on space or enter key
        document.addEventListener('keydown', (event) => {
            if (event.key === ' ' || event.key === 'Enter') {
                event.preventDefault();
                calculateMultipliers();
            }
        });
    </script>

</body>

</html>